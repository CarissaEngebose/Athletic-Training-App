<?xml version="1.0" encoding="utf-8" ?>
<!--
    Name: Dominick Hagedorn
    Date: 10/14/2024
    Description: TrainerHomeScreen
    Bugs: None Known
    Reflection: I struggled with this one quite a bit. I really couldn't figure out how to do the date picker 
                in a way that looked good. After asking for help, my group was able to get a working scrollable calendar.
-->
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="RecoveryAT.TrainerHomeScreen"
             Title="">

    <StackLayout>
        <!--Logo-->
        <Image Source="medical_icon.png"
               HeightRequest="100"
               Grid.Row="0"
               VerticalOptions="Start"
               HorizontalOptions="Center"
               Margin="0,0,0,10"/>

        <!--Date-->
        <Grid BindingContext="{Binding Calendar}">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="4*"/>
                <ColumnDefinition Width="4*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!--Year-->
             <CarouselView x:Name="YearCarousel"
                          PositionChanged="YearChanged"
                          ItemsSource="{Binding Years}"
                          Loop="True"
                          Grid.Row="0"
                          Grid.Column="1">
                <CarouselView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical"/>
                </CarouselView.ItemsLayout>
                <CarouselView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="20"
                               Margin="10"
                               HasShadow="True"
                               BackgroundColor="LightBlue"
                               HorizontalOptions="Fill"
                               VerticalOptions="Fill"
                               HeightRequest="75"
                               WidthRequest="120">
                            <Label Text="{Binding}"
                                   FontSize="Medium"
                                   HorizontalTextAlignment="Center"/>
                        </Frame>
                    </DataTemplate>
                </CarouselView.ItemTemplate>
            </CarouselView>

            <!--Month-->
            <CarouselView x:Name="MonthCarousel"
                          PositionChanged="MonthChanged"
                          ItemsSource="{Binding Months}"
                          Loop="True"
                          Grid.Row="0"
                          Grid.Column="2">
                <CarouselView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical"/>
                </CarouselView.ItemsLayout>
                <CarouselView.ItemTemplate>
                    <DataTemplate>
                        <Frame Padding="20"
                               Margin="10"
                               HasShadow="True"
                               BackgroundColor="LightBlue"
                               HorizontalOptions="Fill"
                               VerticalOptions="Fill"
                               HeightRequest="75"
                               WidthRequest="120">
                            <Label Text="{Binding}"
                                   FontSize="15"
                                   HorizontalTextAlignment="Center"/>
                        </Frame>
                    </DataTemplate>
                </CarouselView.ItemTemplate>
            </CarouselView>

            <!--Previous Week Button-->
            <Button Text="◀"
                    Command="{Binding GetPreviousWeek}"
                    BackgroundColor="Transparent"
                    TextColor="Black"
                    FontSize="24"
                    WidthRequest="50"
                    Grid.Row="1"
                    Grid.Column="0"
                    HorizontalOptions="Center"
                    VerticalOptions="Center"/>

            <!--Days of the week-->
            <CollectionView x:Name="Week"
                            Grid.Row="1"
                            Grid.Column="1"
                            Grid.ColumnSpan="2"
                            ItemsLayout="HorizontalList"
                            ItemsSource="{Binding SelectedDate.Week}"
                            HorizontalOptions="Center">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <!--Background frame-->
                        <Frame Padding="2"
                               Margin="2"
                               HorizontalOptions="Center"
                               VerticalOptions="Center"
                               CornerRadius="8"
                               HasShadow="True">
                            <!-- When Clicked -->
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnDayTapped"/>
                            </Frame.GestureRecognizers>
                            <Frame.Triggers>
                                <!--Set Background blue-->
                                <DataTrigger TargetType="Frame"
                                             Binding="{Binding IsSelected}"
                                             Value="true">
                                    <Setter Property="BackgroundColor"
                                            Value="LightBlue"/>
                                </DataTrigger>
                            </Frame.Triggers>
                            <!--write each day-->
                            <StackLayout Orientation="Vertical"
                                         HorizontalOptions="Center">
                                <Label Text="{Binding DayName}"
                                       FontSize="16"
                                       FontAttributes="Bold"/>
                                <Label Text="{Binding DayNumber}"
                                       FontSize="24"/>
                            </StackLayout>
                        </Frame>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!--Next Week Button-->
            <Button Text="▶"
                    Command="{Binding GetNextWeek}"
                    BackgroundColor="Transparent"
                    TextColor="Black"
                    FontSize="24"
                    WidthRequest="50"
                    Grid.Row="1"
                    Grid.Column="3"
                    HorizontalOptions="Center"
                    VerticalOptions="Center"/>
        </Grid>

        <!--Athlete Forms-->
        <CollectionView ItemsSource="{Binding AthleteForms}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Padding="10"
                           Margin="10,10"
                           CornerRadius="8"
                           HasShadow="True"
                           Grid.Row="3"
                           BackgroundColor="LightSkyBlue">
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnFrameTapped"/>
                        </Frame.GestureRecognizers>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>

                            <Label Grid.Row="1"
                                   Grid.Column="0"
                                   Text="{Binding FullName}"/>
                            <Label Grid.Row="2"
                                   Grid.Column="0"
                                   Text="{Binding Sport}"/>
                            <Label Grid.Row="3"
                                   Grid.Column="0"
                                   Text="{Binding InjuryArea}"/>
                            <Label Grid.Row="1"
                                   Grid.Column="1"
                                   HorizontalOptions="End"
                                   Text="{Binding Grade}"/>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>


        </CollectionView>
    </StackLayout>
</ContentPage>
